#!/bin/bash

source config.sh

DBNAME=GTrackerAdmin

FCMPrivateKeyBase64Encoded="eyJ0eXBlIjoic2VydmljZV9hY2NvdW50IiwicHJvamVjdF9pZCI6ImZpci01YWU2OSIsInByaXZhdGVfa2V5X2lkIjoiZTBkZWNlYTU5MDY2ZGJiNWYwM2IzODA3MDMzMTc0NjRjYjVhNzc1YyIsInByaXZhdGVfa2V5IjoiLS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tXG5NSUlFdlFJQkFEQU5CZ2txaGtpRzl3MEJBUUVGQUFTQ0JLY3dnZ1NqQWdFQUFvSUJBUUNtS05XNmhWSzRRNU5TXG5JN3N3cUY2VnBVSVlTQzZjVVhOekhONmYyUWhCbTh5Wk9DUm1JR1MwWFNWM1JWQk5jU1JlZm05K21qRkFNaUkxXG5JWUZ3WFJSMENQV20vanAxaEVsK2UxNytUOS9mVHFsVHBTWjJ5RkZjQlFKWXkrNTBDSFhPT2ZJbFJNbWhoRyttXG40cks0NVBOZUtXRmwvbVVUOVZEVnhZMGh2eXl5SkRpZnBvdkhJdXpTbU9FOXZENExJVE1xOGNtR05MdnAwRHBxXG5sMXVUMXh3NW5DVDZodjNoV01pL0V5WkE2RlRsdDlnNXRBWUtyZUU1OWdDckhIZVkvR1YrWnJDSWdKeFJISGhzXG5vMkRpZUFEWW1IWHdRZkRTV2NCWHpmdDJzVkdyQTd4ZjcwY3g3OHpHMU1jb1lBcmVLbnRLUklWMDRsSm42b2xKXG5hVlcxeU5rUkFnTUJBQUVDZ2dFQUM2NjNwdXpFZUtKK1dLK2N5Uy9hci9DQWJ2NzFrVlc1WlhZUEFiUFE1MHFzXG4wM2NGanMxUjdLRXNuRnF2YWQvVEcvWml5M0YyNjFtN0JhWk1tSzhLc1pxRy93M3Y0L1JWb0lMTWE5cXlLd2EzXG5xV01RQ3hqMjAzUDNZQnZuMjVqK3JoaHRPZDZXR0tPY1NyZTBzNEx4YzRUbG9yWUV1dnhXdEhrTDBtYkR5SkNJXG5yNmJ1TmlGNDZBdGg4VzBxRTFnYTA2Mm1hQk10Q1QyTHpxV0xqZEluTVFsNXlGNW52aVVGVzNPS3FVOCthZWVOXG5lKzU2Q1FWcnpSZkdDTUdTdW9YblJaOVNpdi9hNzhNamx6Nks2Y3prRmlzUUFPa0VEQWUwNzgyVXowUHBQN1JFXG5uSk1RN0xOdHhRVWw5bVk0c1hUMEJCTlRUVWtPL29pSEZXM1BKemNoV3dLQmdRRFpIZE5zM1VRMmxOU1lTTWQ5XG5hSzVsSGYzdmJFaTkxelljUFpXNWJzbWZJOWNpVlUrMlgyUXpwd3FYTzBOVlA5YktFRENmaTVVNjdhditxNDN5XG5tVFd1S3VnTlU0MjRZNWQ3aUN5eDNyQVlXdGxFMG9ZVGNNRGFmM3NORitrT3JlOXh1a2xJenlFMjVaVjY4M1ozXG5kMWZJdkpsUEJOTmVFYmZFQmRlQTZlUVgxd0tCZ1FERDZzYVU0dnJaaDFZd2FUa0t1Rmk5SjVXY3d6RWdzSTZQXG5LMCtSeWx5cXJZL2ppRk1uWFdTa1U5UUlNUzNjamh5U3F2YnZKbEZXWXczbGozYWZFWnkxSEpiY1Z0TjNnb3huXG5XT0xtcWhXMnE5bnhTcEZXZkNQQnJTNjRTTUtNTjJCeGh4QTRSWGl4OHRPWFR3RkdkQ3JRTTNZZG5ha1FtZVRjXG44OUErMzMxWlZ3S0JnQStTNlNDTStxQ2pxbUJHRURFNXVoQzh4d05PbENVeDg4cXd6RFdoOGNwOWlxZ0cwSkgzXG5ZN3VreHNpMFVvOGg1aWxXWWZaL3o3T0xhdVA0c0ZUdmtuOHN5cnB4L045MkhWNmFGUUtwUTU1cm5kd204Y0VoXG5QR1F2OHNhc3FXWUpLZnpSYlFKUkFVUHIwZjRneXFXbEpPSGNUVzd5bktySndKSEtEWHhNeXJTL0FvR0JBTC9yXG5sV3owalZmYXhBdllpQkNBVmkyMlFWRzN4TUNKTkozN2g0OEI5WlVkUVA5YjVGbURtN3QrZ3c4alhoSFpCUlNJXG5kaTRBRTEzVTJ5QXVVYjJ4dXhtUVVCaTQxWjhWUEFWaGhhVUFxUlN4ZEdaeTdiMFREdFFEbXVqY0hmak5wcVNQXG44c3V0QW5jUHNVZGdGWmUyNU5uZ0Q2MGpiU0xlSHR4ejIyUTcrc2N4QW9HQWZRMDFjOG9tbXg5c0lqMWdEVzA3XG4xVXhVYnNFSCtndjhEd2t0WC9mazFvOUJUTkJuT2lHalNzaThiYTFxSzN1SXJpeS9yK3dpNk55WTdSWTBlREQrXG5KdXJhakwvMlRlVWZ1RnNKN2VkM3kvVktnS2ttelF2T0NCc3BxUEdtMzY0NzM3djdDempZZkJRVXBqT05mVmN6XG5RaFlVaVFnVG5vMVZxUHRGOWlYN2VyTT1cbi0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS1cbiIsImNsaWVudF9lbWFpbCI6ImZpcmViYXNlLWFkbWluc2RrLWxtb205QGZpci01YWU2OS5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbSIsImNsaWVudF9pZCI6IjEwMzEzMDkxNTQ0MjcxNzg0OTk0MSIsImF1dGhfdXJpIjoiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL2F1dGgiLCJ0b2tlbl91cmkiOiJodHRwczovL29hdXRoMi5nb29nbGVhcGlzLmNvbS90b2tlbiIsImF1dGhfcHJvdmlkZXJfeDUwOV9jZXJ0X3VybCI6Imh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92MS9jZXJ0cyIsImNsaWVudF94NTA5X2NlcnRfdXJsIjoiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vcm9ib3QvdjEvbWV0YWRhdGEveDUwOS9maXJlYmFzZS1hZG1pbnNkay1sbW9tOSU0MGZpci01YWU2OS5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbSJ9"

FCMPrivateKey="{\\\"type\\\": \\\"service_account\\\", \\\"project_id\\\": \\\"fir-5ae69\\\", \\\"private_key_id\\\": \\\"e0decea59066dbb5f03b380703317464cb5a775c\\\", \\\"private_key\\\": \\\"-----BEGIN PRIVATE KEY-----\\\\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCmKNW6hVK4Q5NS\\\\nI7swqF6VpUIYSC6cUXNzHN6f2QhBm8yZOCRmIGS0XSV3RVBNcSRefm9+mjFAMiI1\\\\nIYFwXRR0CPWm/jp1hEl+e17+T9/fTqlTpSZ2yFFcBQJYy+50CHXOOfIlRMmhhG+m\\\\n4rK45PNeKWFl/mUT9VDVxY0hvyyyJDifpovHIuzSmOE9vD4LITMq8cmGNLvp0Dpq\\\\nl1uT1xw5nCT6hv3hWMi/EyZA6FTlt9g5tAYKreE59gCrHHeY/GV+ZrCIgJxRHHhs\\\\no2DieADYmHXwQfDSWcBXzft2sVGrA7xf70cx78zG1McoYAreKntKRIV04lJn6olJ\\\\naVW1yNkRAgMBAAECggEAC663puzEeKJ+WK+cyS/ar/CAbv71kVW5ZXYPAbPQ50qs\\\\n03cFjs1R7KEsnFqvad/TG/Ziy3F261m7BaZMmK8KsZqG/w3v4/RVoILMa9qyKwa3\\\\nqWMQCxj203P3YBvn25j+rhhtOd6WGKOcSre0s4Lxc4TlorYEuvxWtHkL0mbDyJCI\\\\nr6buNiF46Ath8W0qE1ga062maBMtCT2LzqWLjdInMQl5yF5nviUFW3OKqU8+aeeN\\\\ne+56CQVrzRfGCMGSuoXnRZ9Siv/a78Mjlz6K6czkFisQAOkEDAe0782Uz0PpP7RE\\\\nnJMQ7LNtxQUl9mY4sXT0BBNTTUkO/oiHFW3PJzchWwKBgQDZHdNs3UQ2lNSYSMd9\\\\naK5lHf3vbEi91zYcPZW5bsmfI9ciVU+2X2QzpwqXO0NVP9bKEDCfi5U67av+q43y\\\\nmTWuKugNU424Y5d7iCyx3rAYWtlE0oYTcMDaf3sNF+kOre9xuklIzyE25ZV683Z3\\\\nd1fIvJlPBNNeEbfEBdeA6eQX1wKBgQDD6saU4vrZh1YwaTkKuFi9J5WcwzEgsI6P\\\\nK0+RylyqrY/jiFMnXWSkU9QIMS3cjhySqvbvJlFWYw3lj3afEZy1HJbcVtN3goxn\\\\nWOLmqhW2q9nxSpFWfCPBrS64SMKMN2BxhxA4RXix8tOXTwFGdCrQM3YdnakQmeTc\\\\n89A+331ZVwKBgA+S6SCM+qCjqmBGEDE5uhC8xwNOlCUx88qwzDWh8cp9iqgG0JH3\\\\nY7ukxsi0Uo8h5ilWYfZ/z7OLauP4sFTvkn8syrpx/N92HV6aFQKpQ55rndwm8cEh\\\\nPGQv8sasqWYJKfzRbQJRAUPr0f4gyqWlJOHcTW7ynKrJwJHKDXxMyrS/AoGBAL/r\\\\nlWz0jVfaxAvYiBCAVi22QVG3xMCJNJ37h48B9ZUdQP9b5FmDm7t+gw8jXhHZBRSI\\\\ndi4AE13U2yAuUb2xuxmQUBi41Z8VPAVhhaUAqRSxdGZy7b0TDtQDmujcHfjNpqSP\\\\n8sutAncPsUdgFZe25NngD60jbSLeHtxz22Q7+scxAoGAfQ01c8ommx9sIj1gDW07\\\\n1UxUbsEH+gv8DwktX/fk1o9BTNBnOiGjSsi8ba1qK3uIriy/r+wi6NyY7RY0eDD+\\\\nJurajL/2TeUfuFsJ7ed3y/VKgKkmzQvOCBspqPGm364737v7CzjYfBQUpjONfVcz\\\\nQhYUiQgTno1VqPtF9iX7erM=\\\\n-----END PRIVATE KEY-----\\\\n\\\", \\\"client_email\\\": \\\"firebase-adminsdk-lmom9@fir-5ae69.iam.gserviceaccount.com\\\", \\\"client_id\\\": \\\"103130915442717849941\\\", \\\"auth_uri\\\": \\\"https://accounts.google.com/o/oauth2/auth\\\", \\\"token_uri\\\": \\\"https://oauth2.googleapis.com/token\\\", \\\"auth_provider_x509_cert_url\\\": \\\"https://www.googleapis.com/oauth2/v1/certs\\\", \\\"client_x509_cert_url\\\": \\\"https://www.googleapis.com/robot/v1/metadata/x509/firebase-adminsdk-lmom9%40fir-5ae69.iam.gserviceaccount.com\\\" }"

#JSON="\"{ \"JWTSecretKey\": \"AnapassGDM7243iGTracker\", 'GeolocationAPIKey': 'AIzaSyAscmbmPWOHk6vPcVZ-OhcoSK9JNrVr7RA', 'AlarmZoneInThreshold': '5', 'AlarmZoneOutThreshold': '5', 'FCMPrivateKey': '${FCMPrivateKey}' }\"" 

#JSON="\"{ \\\"JWTSecretKey\\\": \\\"AnapassGDM7243iGTracker\\\", \\\"GeolocationAPIKey\\\": \\\"AIzaSyAscmbmPWOHk6vPcVZ-OhcoSK9JNrVr7RA\\\", \\\"AlarmZoneInThreshold\\\": \\\"5\\\", \\\"AlarmZoneOutThreshold\\\": \\\"5\\\", \\\"FCMPrivateKey\\\": ${FCMPrivateKey} }\"" 

JSON="\"{ \\\"JWTSecretKey\\\": \\\"AnapassGDM7243iGTracker\\\", \\\"GeolocationAPIKey\\\": \\\"AIzaSyAscmbmPWOHk6vPcVZ-OhcoSK9JNrVr7RA\\\", \\\"AlarmZoneInThreshold\\\": \\\"5\\\", \\\"AlarmZoneOutThreshold\\\": \\\"5\\\", \\\"FCMPrivateKey\\\": \\\"${FCMPrivateKeyBase64Encoded}\\\" }\"" 

echo $JSON 
#exit 1

mysql --host=${MARIA_DB_HOST} --port=${MARIA_DB_PORT} -u ${MARIA_DB_USER} --password=${MARIA_DB_PASS} --database=$DBNAME -e "INSERT INTO Settings (Name, JSON) VALUES ('Default', $JSON);"
